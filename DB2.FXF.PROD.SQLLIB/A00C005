SELECT 'ALTER PROCEDURE '||STRIP(ROU.NAME) AS CMDSQL_,
       ROU.SCHEMA, ROU.NAME, PRM.NAME ,PRM.TYPENAME,
       ROU.COMMIT_ON_RETURN,1
  FROM SYSIBM.SYSROUTINES ROU,
       SYSIBM.SYSPARMS PRM
 WHERE ROU.COMMIT_ON_RETURN = 'A'
   AND ROU.SCHEMA = PRM.SCHEMA
   AND ROU.SPECIFICNAME = PRM.NAME
   AND PRM.TYPENAME IN ('CLOB' ,'BLOB','DBCLOB','XML')
UNION ALL
SELECT ' ALTER ALL VERSIONS' AS CMDSQL_,
       ROU.SCHEMA, ROU.NAME, PRM.NAME ,PRM.TYPENAME,
       ROU.COMMIT_ON_RETURN,2
  FROM SYSIBM.SYSROUTINES ROU,
       SYSIBM.SYSPARMS PRM
 WHERE ROU.COMMIT_ON_RETURN = 'A'
   AND ROU.SCHEMA = PRM.SCHEMA
   AND ROU.SPECIFICNAME = PRM.NAME
   AND PRM.TYPENAME IN ('CLOB' ,'BLOB','DBCLOB','XML')
UNION ALL
SELECT ' COMMIT ON RETURN YES;' AS CMDSQL_,
       ROU.SCHEMA, ROU.NAME, PRM.NAME ,PRM.TYPENAME,
       ROU.COMMIT_ON_RETURN,3
  FROM SYSIBM.SYSROUTINES ROU,
       SYSIBM.SYSPARMS PRM
 WHERE ROU.COMMIT_ON_RETURN = 'A'
   AND ROU.SCHEMA = PRM.SCHEMA
   AND ROU.SPECIFICNAME = PRM.NAME
   AND PRM.TYPENAME IN ('CLOB' ,'BLOB','DBCLOB','XML')
ORDER BY 2,3,4,5,6,7
